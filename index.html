<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fresearch.org</title>
  <style>
    body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin:0; padding:0; background:#fafafa; color:#111; }
    nav { background:#111; color:#fff; padding:1em; display:flex; justify-content:space-around; }
    nav a { color:#fff; text-decoration:none; padding:0 1em; font-weight:500; cursor:pointer; }
    .section { padding:2em; display:none; max-width:1000px; margin:0 auto; }
    .active { display:block; }
    .title { font-size:2.25em; font-weight:600; text-align:center; margin-bottom:1em; text-transform:uppercase; }
    .headline { margin-bottom:1em; border-bottom:1px solid #ccc; padding-bottom:0.5em; }
    .sports-title { font-size:2em; font-weight:bold; text-align:center; margin-top:2em; }
    #sports-scores h3 { text-align:center; }
    .game { margin:0.75em 0; text-align:center; }
    .stock { margin-bottom:2.5em; }
    .stock-title { font-size:1.25em; font-weight:500; margin-bottom:0.5em; }
    .subtitle { font-size:1em; color:#666; text-align:center; margin-bottom:1.5em; }
    #about .subtitle { text-align:center; margin-bottom:1.5em; line-height:1.6; }
    canvas { width:100% !important; height:300px !important; margin-bottom:1em; }

    /* === AI Search (Brave) styles === */
    .ai-search-wrap{max-width:1000px;margin:0 auto 1.25rem auto;padding:0 1rem}
    .ai-search-card{background:#fff;border:1px solid #e6e6e6;border-radius:10px;box-shadow:0 1px 3px rgba(0,0,0,0.04);padding:1rem}
    .ai-search-row{display:flex;gap:.5rem}
    .ai-search-input{flex:1;font:500 16px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;border:1px solid #ddd;border-radius:8px;padding:.75rem 1rem;outline:none}
    .ai-search-input:focus{border-color:#111;box-shadow:0 0 0 3px rgba(17,17,17,.08)}
    .ai-search-btn{border:1px solid #111;background:#111;color:#fff;border-radius:8px;padding:.75rem 1rem;cursor:pointer;font-weight:600}
    .ai-search-btn:disabled{opacity:.6;cursor:not-allowed}
    .ai-search-results{margin-top:.75rem}
    .ai-search-item{padding:.75rem 0;border-top:1px solid #f0f0f0}
    .ai-search-item:first-child{border-top:none}
    .ai-search-title{font-weight:600;margin:0 0 .25rem 0}
    .ai-search-link{color:#111;text-decoration:none}
    .ai-search-link:hover{text-decoration:underline}
    .ai-search-snippet{color:#444;margin:.25rem 0 0 0}
    .ai-search-meta{font-size:12px;color:#888;margin-top:.25rem;word-break:break-all}
    .ai-search-status{font-size:14px;color:#666;margin-top:.75rem}
  </style>
</head>
<body>
  <nav>
    <a onclick="showSection('news')">News</a>
    <a onclick="showSection('investing')">Investing</a>
    <a onclick="showSection('about')">About</a>
  </nav>

  <div id="news" class="section active">
    <h2 class="title">TOP NEWS HEADLINES</h2>
    <div id="news-content">Loading news...</div>
    <h2 class="sports-title">SPORTS</h2>
    <div id="sports-news">Loading sports headline...</div>
    <div id="sports-scores">
      <h3>NBA</h3><div id="nba-scores">Loading scores...</div>
      <h3>NFL</h3><div id="nfl-scores">Loading scores...</div>
      <h3>Premier League</h3><div id="epl-scores">Loading scores...</div>
    </div>
  </div>

  <div id="investing" class="section">
    <!-- === AI Search (Brave) anchor (auto-mounts above #quick-picks) === -->
    <div id="ai-search-anchor" class="ai-search-wrap" style="display:none">
      <div class="ai-search-card">
        <div class="ai-search-row">
          <input id="ai-search-input" class="ai-search-input" type="search" placeholder="Search markets, companies, or finance topics…" />
          <button id="ai-search-btn" class="ai-search-btn">Search</button>
        </div>
        <div id="ai-search-status" class="ai-search-status"></div>
        <div id="ai-search-results" class="ai-search-results"></div>
      </div>
    </div>
    <!-- === /AI Search (Brave) anchor === -->

    <div id="quick-picks">
      <h2 class="title">QUICK PICK</h2>
      <p class="subtitle">An investment that is updated often for short-term gain opportunities.</p>
      <div class="stock">
        <div class="stock-title">American Airlines (NASDAQ:AAL)</div>
        <canvas id="chart-aal"></canvas>
        <div id="news-aal">Loading news...</div>
      </div>
    </div>

    <h2 class="title">BLIND GROWTH</h2>
    <p class="subtitle">Long-term investments with high growth potential.</p>
    <div class="stock">
      <div class="stock-title">Expedia Group Inc. (NASDAQ:EXPE)</div>
      <canvas id="chart-expe"></canvas>
      <div id="news-expe">Loading news...</div>
    </div>
    <div class="stock">
      <div class="stock-title">Diversified Energy Company (NYSE:DEC)</div>
      <canvas id="chart-dec"></canvas>
      <div id="news-dec">Loading news...</div>
    </div>
    <div class="stock">
      <div class="stock-title">Microsoft Corp. (NASDAQ:MSFT)</div>
      <canvas id="chart-msft"></canvas>
      <div id="news-msft">Loading news...</div>
    </div>
    <p class="subtitle" style="color:#111;font-weight:bold;">
      Fresearch.org is for educational and informational purposes only. It should not be considered financial or investment advice. Always do your own research before making decisions.
    </p>
  </div>

  <div id="about" class="section">
    <h2 class="title">About Fresearch.org</h2>
    <p class="subtitle">
      Fresearch.org is a free independent investment research site created with the goal of sharing thoughtful, data-driven analysis. 
    </p>
    <p class="subtitle">
      <strong style="color: #111;">Our Mission: To learn as much as possible about financial markets and bring others along for the ride.</strong>
    </p>
    <p class="subtitle" style="color: #666;">
      Founder and Lead Analyst <strong style="color: #111;">Franklyn Louis</strong> is a New York based finance student and
      market enthusiast. As the youngest child of four raised by a hardworking single mother, Franklyn learned
      early on that perseverance and curiosity can move mountains. His finance journey began at the age of 16, during the height of the COVID-19 pandemic. 
      Like many teens, he spent much of his time at home trying to stay busy and productive. 
      Growing up, basketball and lacrosse had always been a big part of his life. 
      Sports that kept him active and taught him valuable lessons about discipline, teamwork, and resilience is what he believes shaped him to be the man he is today. 
      When the pandemic hit and uncertainty surrounding contact sports loomed, he turned to the world of finance as a way to channel his energy and curiosity. 
      Late nights spent digging through 10-K reports and building financial models quickly evolved from a hobby into a serious pursuit. 
      He developed a habit of asking “why?” at every turn, fueling his desire to understand. 
      At 18, he began working in consumer banking where his love for analysis met a passion for helping others. 
      Engaging directly with clients and guiding them through important financial decisions gave him valuable hands on experience. 
      This combination of analytical skill and practical experience continues to inspire his career goals, as well as strengthen his dedication to advance in the industry.
      <br><br>
      Today, Fresearch.org is a direct reflection of his commitment to continue learning and growing. 
    <p class="subtitle" style="color: #111; font-weight: bold;">
      Fresearch.org is for educational and informational purposes only. It should not be considered financial or investment advice.
      Always do your own research before making decisions.
    </p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- === AI Search (Brave) script === -->
  <script>
  (function(){
    // === CONFIG ===
    const BRAVE_API_KEY = "BSAvtx9iW1BrvH_fJXytIGhh-iXY9ej"; // provided by you
    const MAX_RESULTS = 6;

    // Try to mount above Quick Picks
    function mountAboveQuickPicks(){
      const quick = document.getElementById("quick-picks");
      const anchor = document.getElementById("ai-search-anchor");
      if(quick && anchor){
        quick.parentNode.insertBefore(anchor, quick);
        anchor.style.display = "block";
      } else if(anchor){
        // Fallback: insert at top of Investing
        const investing = document.getElementById("investing") || document.body;
        investing.insertBefore(anchor, investing.firstChild);
        anchor.style.display = "block";
        console.warn("AI Search: #quick-picks not found. Inserted at top of Investing.");
      }
    }

    function setStatus(msg){ document.getElementById("ai-search-status").textContent = msg || ""; }
    function renderResults(items){
      const box = document.getElementById("ai-search-results");
      box.innerHTML = "";
      if(!items || !items.length){
        box.innerHTML = "<div class='ai-search-status'>No results.</div>";
        return;
      }
      for(const r of items){
        const title = r.title || r.name || "Untitled";
        const url = r.url || r.link || r.permalink || "#";
        const snippet = r.description || r.snippet || r.text || "";
        const host = (()=>{ try { return new URL(url).host; } catch(e){ return ""; } })();

        const item = document.createElement("div");
        item.className = "ai-search-item";
        item.innerHTML =
          `<h4 class="ai-search-title"><a class="ai-search-link" href="${url}" target="_blank" rel="noopener noreferrer">${title}</a></h4>
           ${snippet ? `<p class="ai-search-snippet">${snippet}</p>` : ""}
           ${host ? `<div class="ai-search-meta">${host}</div>` : ""}`;
        box.appendChild(item);
      }
    }

    async function braveSearch(q){
      const endpoint = "https://api.search.brave.com/res/v1/web/search";
      const params = new URLSearchParams({
        q: q.trim(),
        count: String(MAX_RESULTS)
        // You can bias toward fresh finance news by adding:
        // , freshness: "month"
      });

      const res = await fetch(endpoint + "?" + params.toString(), {
        method: "GET",
        headers: {
          "Accept": "application/json",
          "X-Subscription-Token": BRAVE_API_KEY
        }
      });

      if(!res.ok){
        const txt = await res.text();
        throw new Error(`HTTP ${res.status}: ${txt}`);
      }
      return res.json();
    }

    function initUI(){
      const input = document.getElementById("ai-search-input");
      const btn = document.getElementById("ai-search-btn");

      async function run(){
        const q = input.value.trim();
        if(!q){ setStatus("Type something to search…"); return; }
        btn.disabled = true;
        setStatus("Searching…");
        document.getElementById("ai-search-results").innerHTML = "";
        try{
          const data = await braveSearch(q);
          const results = data?.web?.results || [];
          renderResults(results);
          setStatus("");
        }catch(err){
          console.error(err);
          setStatus("Error fetching results. Please try again.");
        }finally{
          btn.disabled = false;
        }
      }

      btn.addEventListener("click", run);
      input.addEventListener("keydown", (e)=>{ if(e.key === "Enter") run(); });

      // Optional debounce for type-to-search:
      // let t=null; input.addEventListener("input", ()=>{ clearTimeout(t); t=setTimeout(run, 500); });
    }

    // Mount once DOM is ready (Investing tab content is already in DOM)
    document.addEventListener("DOMContentLoaded", function(){
      mountAboveQuickPicks();
      initUI();
    });
  })();
  </script>
  <!-- === /AI Search (Brave) script === -->

  <script>
    const NEWSAPI_KEY = 'ab40cc3f4aea49aab032bbe04fdc10b3';
    const ALPHA_KEY = 'JAKAWZBJIWZVSKZ1';
    const PROXY = 'https://corsproxy.io/?';

    function showSection(id) {
      document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
      const target = document.getElementById(id);
      if (target) target.classList.add('active');
    }

    window.addEventListener('hashchange', () => showSection(location.hash.substring(1)));
    document.addEventListener('DOMContentLoaded', () => {
      showSection(location.hash.substring(1) || 'news');
      fetchGeneralNews();
      fetchSportsHeadline();
      ['AAL','EXPE','DEC','MSFT'].forEach(t => fetchCompanyNews(t, 'news-' + t.toLowerCase()));
      [['AAL','chart-aal'],['EXPE','chart-expe'],['DEC','chart-dec'],['MSFT','chart-msft']]
        .forEach(([s,c]) => fetchStockData(s,c));
      fetchESPNScore('https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard?dates=20250622', 'nba-scores');
      fetchESPNScore('https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard?dates=20250809', 'nfl-scores');
      fetchESPNScore('https://site.api.espn.com/apis/site/v2/sports/soccer/eng.1/scoreboard?dates=20250823', 'epl-scores');
    });

    async function fetchNews(containerId, url) {
      try {
        const res = await fetch(PROXY + encodeURIComponent(url));
        const data = await res.json();
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        (data.articles || []).forEach(a => {
          const date = new Date(a.publishedAt).toLocaleString('en-US',{timeZone:'America/New_York'});
          container.innerHTML += `<div class="headline"><strong>${a.source.name}: ${a.title}</strong><br><em>${date}</em><br><a href="${a.url}" target="_blank">Read full article</a></div>`;
        });
      } catch (e) {
        document.getElementById(containerId).innerHTML = '<p style="text-align:center">Error loading news</p>';
        console.error('Error fetching news:', e);
      }
    }

    function fetchGeneralNews() {
      fetchNews('news-content', `https://newsapi.org/v2/top-headlines?country=us&category=business&pageSize=10&apiKey=${NEWSAPI_KEY}`);
    }

    function fetchSportsHeadline() {
      fetchNews('sports-news', `https://newsapi.org/v2/top-headlines?category=sports&country=us&pageSize=3&apiKey=${NEWSAPI_KEY}`);
    }

    function fetchCompanyNews(ticker, containerId) {
      fetchNews(containerId, `https://newsapi.org/v2/everything?q=${ticker}&pageSize=2&sortBy=publishedAt&apiKey=${NEWSAPI_KEY}`);
    }

    async function fetchStockData(symbol, canvasId) {
      try {
        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${symbol}&apikey=${ALPHA_KEY}`;
        const res = await fetch(PROXY + encodeURIComponent(url));
        const data = await res.json();
        const ts = data['Time Series (Daily)'] || {};
        const dates = Object.keys(ts).slice(0,30).reverse();
        const prices = dates.map(d => parseFloat(ts[d]['4. close']));
        new Chart(document.getElementById(canvasId), {
          type: 'line',
          data: { labels: dates, datasets: [{ label: `${symbol} Price`, data: prices, tension: 0.2 }] },
          options: { responsive: true }
        });
      } catch (e) {
        console.error('Error loading stock data for', symbol, e);
      }
    }

    async function fetchESPNScore(url, containerId) {
      try {
        const res = await fetch(url);
        const data = await res.json();
        const events = data.events || [];
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        events.slice(0,3).forEach(e => {
          const comp = e.competitions[0].competitors;
          const home = comp.find(c => c.homeAway==='home');
          const away = comp.find(c => c.homeAway==='away');
          const dateObj = new Date(e.date);
          const dateStr = dateObj.toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'});
          const timeStr = dateObj.toLocaleTimeString('en-US',{timeZone:'America/New_York',hour:'numeric',minute:'2-digit',hour12:true}) + ' EST';
          const state = e.status.type.state;
          const status = state==='post'?'Final':state==='in'?'In Progress':'Scheduled';
          container.innerHTML += `<div class="game">${away.team.displayName} at ${home.team.displayName}<br><em>${dateStr} ${timeStr}</em><br>Score: ${away.score||0} - ${home.score||0} | Status: ${status}</div>`;
        });
      } catch (e) {
        document.getElementById(containerId).innerHTML = '<p style="text-align:center">Error loading scores</p>';
        console.error('Error fetching ESPN scores:', e);
      }
    }
  </script>
</body>
</html>